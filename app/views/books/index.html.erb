<style>
  nav.pagination {
    display: none;
  }
</style>

<div class='container px-5 px-sm-0'>
  <%= render "devise/shared/error_messages", resource: @book %>
  <div class='row'>

    <div class='col-md-3'>
      <%= render 'common/user_info', user: current_user %>
      <%= render 'common/new_book' %>
    </div>

    <div class='col-md-8 offset-md-1'>
      <h2>Books</h2>
      <div class="row border-top border-bottom py-1 font-weight-bold">
        <div class="col-sm">
        </div>
        <div class="col-sm">
          Title
        </div>
        <div class="col-sm">
          Description
        </div>
      </div>
      <div class='jscroll'>
        <% @books.each do |a_book| %>
          <div class="row border-bottom py-1">
            <div class="col-sm">
              <%= link_to user_path(a_book.user.id) do %>
                <%#= attachment_image_tag a_book.user, :profile_image, :fill, 60, 60, fallback: "no_image.jpg"%>
                <%#= image_tag a_book.user.profile_image, size: '60x60', fallback: 'no_image.jpg' if a_book.user.profile_image.attached? %>
                <% if a_book.user.profile_image.attached? %>
                  <%= image_tag a_book.user.profile_image, size: '60x60' %>
                <% else %>
                  <%= image_tag 'no_image.jpg' %>
                <% end %>
              <% end %>
            </div>
            <div class="col-sm">
              <%= link_to a_book.title, book_path(a_book.id) %>
            </div>
            <div class="col-sm">
              <%= a_book.body %>
            </div>
          </div>
        <% end %>
        <%= paginate @books %>
      </div>
    </div>

  </div>
</div>

<script>
  $(document).on('turbolinks:load', function() {
    $('.jscroll').jscroll({
      contentSelector: '.jscroll', 
      nextSelector: '.next a',
      padding: 10
    });
  });
</script>